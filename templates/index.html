<!doctype html>
<title>Doomsday Clock</title>
<h2>Doomsday coming in</h2>
<h1 id="date">{{ days }} days, {{ hours }} hours, {{ minutes }} minutes and {{ seconds }} seconds.</h1>

{% if link_type == 'IMAGE' %}
<img src="{{ link }}">
{% elif link_type == 'VIDEO' %}
<iframe width="560" height="315" src="https://www.youtube.com/embed/{{ link }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
{% endif %}

<script>
  function setDateText() {
    dateEl.innerText = Math.floor(secondsDiff/(3600*24)) + " days, " + Math.floor(secondsDiff/3600) % 24 + " hours, " + Math.floor(secondsDiff/60) % 60 + " minutes and " + secondsDiff % 60 + " seconds.";
  }

  var secondsDiff = {{ seconds }} + {{ minutes }}*60 + {{ hours }}*3600 + {{ days }}*3600*24;
  var dateEl = document.getElementById("date");

  setDateText();

  setInterval(function(){
    secondsDiff -= 1;
    setDateText();
  }, 1000);
</script>
